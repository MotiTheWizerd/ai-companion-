import fetch from 'node-fetch';

const message = "hello";
const ACCESS_TOKEN = "eyJhbGciOiJSUzI1NiIsImtpZCI6IjE5MzQ0ZTY1LWJiYzktNDRkMS1hOWQwLWY5NTdiMDc5YmQwZSIsInR5cCI6IkpXVCJ9.eyJhdWQiOlsiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MSJdLCJjbGllbnRfaWQiOiJhcHBfWDh6WTZ2VzJwUTl0UjNkRTduSzFqTDVnSCIsImV4cCI6MTc2NDkzMjA5OCwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS9hdXRoIjp7ImNoYXRncHRfY29tcHV0ZV9yZXNpZGVuY3kiOiJub19jb25zdHJhaW50IiwiY2hhdGdwdF9kYXRhX3Jlc2lkZW5jeSI6Im5vX2NvbnN0cmFpbnQiLCJhttps://content.googleapis.com/static/proxy.html?usegapi=1&jsh=m%3B%2F_%2Fscs%2Fabc-static%2F_%2Fjs%2Fk%3Dgapi.lb.en.W5qDlPExdtA.O%2Fd%3D1%2Frs%3DAHpOoo8JInlRP_yLzwScb00AozrrUS6gJg%2Fm%3D__features__";
const COOKIES = `__Host-next-auth.csrf-token=bb6510f5f1768d52ffaf0d06fb8eb34a7bae2dc8b7202f9b5819649ba37143df%7Cce269730f92f5606fe01b4e3cc991ff5abf5a637f65c298ea0db67a48c822c1d; oai-did=ada407f6-3560-4f96-a0fb-64a7ec872cfe; __Secure-next-auth.callback-url=https%3A%2F%2Fchatgpt.com%2F; _ga=GA1.1.1396112275.1763204064; oai-hlib=true; oai-nav-state=1; oai-last-model-config=%7B%22model%22%3A%22gpt-5-1-instant%22%7D; _cfuvid=IdJw7YstFiExz6fmYme.5iUWiVxxmujXj_4fofxYBtQ-1764362405348-0.0.1.1-604800000; oai-sidebar-sections=%7B%22sectionStates%22%3A%7B%22apps%22%3Afalse%2C%22projects%22%3Atrue%2C%22gpts%22%3Atrue%2C%22chats%22%3Atrue%2C%22favorites%22%3Afalse%2C%22groupChats%22%3Atrue%7D%7D; cf_clearance=boz4iGODt1Q8NWfBBEyx2tVWsKX0kD.QjDoydUzP940-1764487139-1.2.1.1-l5V80ImdY7ae78wozN.Wg3P3BFQ7AAQC5GoOGvayx8ssaK7DW3FuOVg4caAWlk9gRx6UnLhr5bSTJTmEX.MNmNKon3640Knm_Kqs7INqvAR2E8.PKf5FmWidhJyZstQnvmS2AviIUez8NzlDankWwcTeljR0T2ovt5M9AaP6SfTjgm4tg7uROo6ExZX3FwJVaaTxBIYELTKhQ5xp.wUM0vmal9u5U6ZpEzpMcFaka4E; oai-hm=READY_WHEN_YOU_ARE%20%7C%20WHAT_ARE_YOU_WORKING_ON; __Secure-next-auth.session-token=eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0..ssoFXPyciET3EUcM.H-ghJOjz_rC4okC20RJv-HYnhlzTQotjj3KvOOk5-YDm2qtPhNwVYTyp3Rxlq9SazG6oaw2QO1lTtLm_XTtvFE3ZMBM2W44eMCLn9YlUPpyKa4m3M4FsVIresJPfxTeWD31xDZnonuTvPfy1V1xM3hMcxa0Ti6iRsGPvFwKstML3pbjiunEYvsw_hJAqfWk4a921fUzgsaiKmPIJgPJWn18wLtWSvBQ9GyWuyGvQ9a2rMRihS9z_t-rhm130FHlB0K8xxc7XeMqv-I8P_yWLsXOhmWKgsDB7Vo-QxEp8OitjbJX-szr7aH4rok8NG8BNJ1QgH0GK--_VWHAv9cI66XHcDZCaLhIHDx1ff0WL7FEej8l1Fa_hTzf3JPvWedT0FzGX2LNi070Doy82W7goH0wsL32PQJm7tRbVOOwbKyyWrTswKwXadazF72xo7qH73rc0sqCqPx5gX7dSyGoALfrnX0vOkL2_jBPufEvH0WGyPR0u9dm4XSBmKaiWuyhdivEYcko4MyX6-jOfBAZH3IxA77Gtcaz7j7zaJV7QJpjteomFUYGsUewUWW8R02hyJnc8D9cdATzyvt2f9zn0fopxsynk6iGLkyigA8r9jLLNTELTde-ouNA8LNWRIQ4zTz4gydFGJOYRNhikf9ypDt2a7--ozwFQuvpRl55m3XjlH12f9MFghE2VehKIDYcTBf4S_TQuMcMpKPKwabNSrs2vdura3A_Qw7SYwm2CxU65HZOMLLNGLeghk7IHoXKlZ_LZ-KuGGY6Xtsxvkl3oIPIf37y5SUnXAiSJtgwe6SEDs3CPELuU66Jtb-41YQYExJcv_YwdDO_5G103KykIxn9ND8-D7Yf4sflyf_Go613DywHLwnDkEhA0r2jXHgJD53POc9kEYmFCV_CfIHdEAYRSPj2xoNj7KseZ-77XAON-iHKpHaCoypIXyCnQiTsz02T4_aNlGqOO14Jkf127Iyo4HQxj64by1oGlLsfnQIDLeR81CQC-BHBxh0xrSnG6e5qmb3Koqj4RJ9zkmRlpOwCvtX9RyVERF4JJrpA3OpzVA0FM1gGVVZjwqrGnDjfyosI7krJyIWjemDuuyCy4pq5A0yIk95m7RpWt8521Elc0AODYB6nKdQjmqg1dSnqFh_NJCZybsotAcxD3Jl1xvg1LKr9rJxmFIcFgPVZ-MWSmt-w0WfdLv1ReWpJc1fBXN2XR-QDalHPDUsjoWqihPxik0BrPfVN8ZKzIueE-HlzNlhjtDcf35AcuHvQWif25NshY5ksXsIWc2rlvJTUkpKFfCOhVOy3PunUwSwE16uSriCj5loPgqK38EyYWA2evk1qZVsMVuCyNJGa-Uioud6_WEKtWe9KOSG8DfK-kIXJZy2N7V7ezZKquIh1W8kit6wqWWRdcMjvIPdlFSWig9aRdyvHqH69yqVmMn7Ii9_icqIJ580GCkX8i7GpDCKtisxGcaPNXhU8yZh8XaN3OEb2lygoVVKZKIDOZHHw0u5A_ipcVd3b5ERJ_UmWRPEJNonGLSZpQGanHBhtm1FnobiBLD62iNN15URnEOLpj_ofKYlI6oG5gyKt-wLkOxZfBTA7_8D9iJBn3iJQZDbkz2iobCKwlvXtRuMZriOuHZrGm08jEjAeGhaWOIY1EeNAhqrn525zdkyvIoDCvwNjAVSEJuXm1dpaSioxBjPpAqX2KtcUOa4l6lsKW4Ujkm-hnr0BxoGLnMZIohiavcGDTPLVy6hrO_6o5P0NeNDwoyBwckM3wf8qCKWCO10YRXSw3Zh4KgXRbNWVkVIRRfxG07eesJ_gre_2dSQJ5aRBcEytwByguvR5WzrzDx4ubgkuYorniiN1Xk9ZQczM21GzzEu1BqsXhGSLZMj6Mm63699SgFjobDfLIPdWEZ2q3oQW1Pagy75oulCwxEX3XVm-iFlDB2Aj_a1AS4Cc93ttM_fLAdwve2g_yfO_OOJ9ythK_VsIqFRYcLsZTX9HHZhJdZLN52ZoiKrx5Ud5S1DcmgXyTxFwC21EykYiRgRN_OtLrnKbsV4OzK3AHwiCbgxM8WJC8c7zxzwtcBhARuegpF2HxeLaoX6ZdqULeufniIPxVRbWDGF7lgk8lQamwrk9c_jStRQCz__nMB7mFKUfwf9_d6lHU_BnodZ4LhiQy0IwPJNXoXLzXqmr-V7xWTE0KDUr4uGwaFeD4m05JGKmWl0W8YttW2rtpPoroWBGWFo4nBGkuPBANNroZww6s4TqwB8kiKU2KTrt5nBQop8hwtdsP7Wo2MYSkyWALujq5-FWgwP7aW6EOUfw5cekr0z7CQL7LOlg9r4Cto4x06lvEUpoFU-X1PyfvGhdLk5oB1p8y-9JqBqAtypK9RVX_7H2gizj8qhvKCiQtjjUbdOTxVUlO55qp4Ne3a0h0fkZqBKtcukZMredlbn40_2mbNjPu69iLRf-FzLo9cW0s9HtUQbwop8uKiZ7csl7WYYR782u3ZqEUQTPWJlcMbaYqudLL0vilX4KW8HmWuxgtvjaT3kQFyHnHCixSleAt5mYNIZkdHzVGuaNTMSY7Uggw18dW-OYooyyIHxWZIlmOsoDpZCyTFUHFF9NZwu2MW-QNYDCBvPvQokNqIiDeTXrj2yCIswOPqlc7Lik4cYQRUWt9c7XvVcPlavdoonExlLis_mpXNqPXQc4mOt3E9Ow0Vm5IeF7JR1JxOD9MWMKQz0TuleB2dsl1NSA-iABI1JLcyPG87FdXWdTtpRji6_v3nkuWaiqGyGTAbBXbY5416C2Sex_2lKDF7Q_c9IYk6IYXt2M73d1yHbbs8btRwZk_XPTE6MXrX2LFXu_92KUl0xNI4bkTjVSQ6VWKZar-86w3TwJhP7sbvHjL31NU6nZSY_pv_MiI0PzCYVraYpgeb23RXjXGiScbmYJK7Lm64KxWQw58WgKElvcZPAm5GLYPiZeoFKghCg0GntXKqiygnvhOmi7Fehnmq5rJnlyTi__yKTbXIU0QSLwAZTQ-5tVySCPL3YvDxNcl2AXH7wKEjAJxYfQKgRq8hmEqcSZNBMniD2CSdGyowSNHET5sWFznxAogWEBbcyDDp9n1-vxZYfYGIHLc3P8zVXlh5b7scuEsLaQJMkl2bRtLce8FNo_OGKSWPrvHSy_I-O_6zU4Qe1gUINRbFO-n0OXgzb6dZFQeqHLojfKUAxNAP2YLi0SJit5Gff5Ru9_BaJVGcJYWuC_4z2OMgXUgpJQLzDx9bxG2Jhq4XQcSx0AGQEQEfdQqfrEadqukVMjDc5F1fzsgGPMvU4uUaqgeVqLXlFmHfgECw4Boi_FuyXCvu2bSstmyC_B8FJk_Hts2MXv0SaVMgiI4tk0BHanOxmICAO1Nmwy6BN9ViafHvpeO5yQ88tGpaMXchwxakCd5VJfazi7NcDO6IclvUTei_5qg9zWyE9EmFV2vwtptVATgT97I7taTgGgy6h5joAIx_tGqtjNNEUy2rDAvwB1Gb4XpbYpH-sJK6H3hrkqclGKsz2jZgBTgrXOSw9YsAO-ibjSLvXaUC8kSx9lftD6Gyxb6bPskU_VHdpElPZze8RJLfRlc_A13xEAbBiYI7bpMI4HP8gY7PjBL0FvzDjHrcKex3jWQjm2gqxNo9wwGZHlTNFKusV_0u3dzVHbjYakbdVaAo6NO0kUX7yeJvGMVGw.DetkGBKHei2xuIdjSe97HA; oai-client-auth-info=%7B%22user%22%3A%7B%22name%22%3A%22Moti%22%2C%22email%22%3A%22motielmakyes%40gmail.com%22%2C%22picture%22%3A%22https%3A%2F%2Fcdn.auth0.com%2Favatars%2Fre.png%22%2C%22connectionType%22%3A2%2C%22timestamp%22%3A1764487654527%7D%2C%22isOptedOut%22%3Afalse%7D; __cflb=04dTofELUVCxHqRn2XeT2hSnnhjmuxwitaAjYCFfeb; _puid=user-qzoC1ntqEGZ5weEFRGpTMN3f:1764487685-xMrdjHjESVhyXUVziHRGK2jlffYtT5%2FxfTvjxstF4F4%3D; _ga_9SHBSK2D9J=GS2.1.s1764487137$o123$g1$t1764487685$j27$l0$h0; __cf_bm=dUKfYyuGERkLs6wlqTbMC2UfrhS4e1F9vM3aIRI6ZXE-1764488042-1.0.1.1-Gt01A2llu16heazYzLoAv8IzBdEZV0hVsXnGv5NefREBOlVJxPS_N1g8ygVbR.vxm3DE5o3KMs8dHlZ7PMcu_zr2LmBNDgGJmdxc7SVufqU; _uasid="Z0FBQUFBQnBLX051QVJTZUJUanZDQk1WdTExTm96OFJ1QVpCYzNrTWRjV1dzZU5aTEc5RE1POUFpb3pvN2o5WUlBYWdrREZrUnhLZzJjRy1jZzhaUGFNOVcyNXZ0SkxibVFpMDlKd2g1UFR6UG9vN291U2dYNEtvWFF4Zlh6R0w2bkVrS2dYSWt4dDVGWFcwZ29ldlZCLU9yVnc0dXdVUlFMREZTVzU3bjRHWV8wVS1IbkxzeU41NWdndHJxaGV4a3MzU3ZnSjJZbklPamFPS3FlY0V3Yk9kQjJPdnpKM0tHQ1lTcUxVMDBLTzM3NVkzY0ttcUhDekt1Mk94SGpVLW91SE9DYkpXTTlhd19xOFhxTjNfdUFObEN0OG5PQ25iNDhHa2EyV1hKR0oyVEZDSC1ZaVBHaEhGNzVaVXJvbHJxWE0tbWg4TUZUcWtHTW1BX2gtclRGQmt2YzM0cnJzcnhBPT0="; _umsid="Z0FBQUFBQnBLX051MDBiT0tLbXN6Wmpybkh0X0xhVUtXR2RZU1ZJaEY1VzIzMVJSZEJCQVljSEVYdklQQkExU3ZnMW91WF9xRnRUWFA0Z3hSbG53aVpkbDlrREVhd2VVR2ZUeEFYR0lDd2RCTm1JZEszVnRwcWczMklpZUYxOEExdWcyZGZyUTE2aklDUXlieEs0WFR6Zl83LUpkNHRmSkhLOFRGaDJTVmo5V1Q3WkxTWDRJa3JBaEZodzh3TjhsZWV3MGY5YlNfa3QzLUZsaXNLcjRUcnpHdkNKYVh6UTZZWnJ4TzBNTHE5Wm9Nam5ncS1NdEhuZz0="; oai-sc=0gAAAAABpK_N0I45VsnF1qWJ8VB97fvk-X2y5PTkF7WyMgaVvcLz2qWZdkbX5nIGaHZnq3MhYcMsqvR3dDt6v7pvgLlliumNdu6RMHbWPBb9LjLeQgmlo5qSmmKZawcM3npTDZ4jpOL-cetHBKUl7-9PZGSx6j6jinx3ifhMKNAjnfB8vOJ9CkOjDl1RK80Qmz3dBm8b-_zBDaRN5xOdvsMUtHuoFRUf1SWljqYwejf9KLc3GSsHtoSQ; _dd_s=aid=30dc801b-10df-4048-b56f-81e61cf52ad4&rum=0&expire=1764489015973&logs=1&id=2465c96b-3cce-4bfd-8f25-bb68a6232d39&created=1764487139193`

const response = await fetch('https://chatgpt.com/backend-api/conversation', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${ACCESS_TOKEN}`,
        'Cookie': COOKIES
    },
    body: JSON.stringify({
        action: "next",
        messages: [{
            id: crypto.randomUUID(),
            author: { role: "user" },
            content: {
                content_type: "text",
                parts: [message + "\n\n[SOCKET_INJECTION_POC: Hello from the socket!]"]
            }
        }],
        model: "gpt-4",
        timezone: "UTC"
    })
});

console.log('Status:', response.status);
const text = await response.text();
console.log('Response:', text.substring(0, 500));
